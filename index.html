<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Teka-Teki Provinsi Interaktif</title>
  <style>
    /* Umum */
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f8ff;
      color: #333;
    }

    h2, p, h3 {
      text-align: center;
      font-size: 24px;
      color: #4a90e2;
      margin-bottom: 10px;
    }

    p {
      font-size: 18px;
      margin-top: 0;
      color: #555;
    }

    h3 {
      font-size: 20px;
      margin-top: 20px;
    }

    #timer {
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
      color: #e74c3c;
    }

    table {
      border-collapse: collapse;
      margin: 20px auto;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    td {
      border: 1px solid #ddd;
      width: 40px;
      height: 40px;
      text-align: center;
      font-size: 16px;
      cursor: pointer;
      background-color: #fff;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    td:hover {
      background-color: #f9f9f9;
      transform: scale(1.1);
    }

    td.selected {
      background-color: #ffeb3b;
    }

    td.correct {
      background-color: #4caf50;
      pointer-events: none;
      color: white;
      font-weight: bold;
    }

    ul {
      list-style-type: none;
      padding: 0;
      max-width: 600px;
      margin: 0 auto;
      font-size: 18px;
      text-align: center;
    }

    li {
      display: inline-block;
      background: #4a90e2;
      color: white;
      padding: 8px 20px;
      margin: 5px;
      border-radius: 20px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    li:hover {
      background-color: #357ABD;
    }

    h2 {
      font-size: 28px;
      color: #333;
    }

    h3 {
      font-size: 20px;
      color: #4a90e2;
    }
  </style>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

<h2>üß© Teka-Teki Provinsi Interaktif</h2>
<p>Sentuh atau klik huruf berurutan untuk membentuk nama provinsi.</p>

<table id="grid"></table>

<h3>üó∫Ô∏è Daftar Provinsi:</h3>
<ul id="words">
  <li>SUMATERABARAT</li>
  <li>SUMATERAUTARA</li>
  <li>KALIMANTANBARAT</li>
  <li>KALIMANTANSELATAN</li>
  <li>KALIMANTANUTARA</li>
  <li>SULAWESIUTARA</li>
  <li>SULAWESITENGAH</li>
  <li>NUSATENGGARABARAT</li>
  <li>PAPUABARAT</li>
  <li>PAPUATENGAH</li>
</ul>

<div id="timer">Waktu: 00:60</div>

<script>
const words = [
  "SUMATERABARAT", "SUMATERAUTARA", "KALIMANTANBARAT", "KALIMANTANSELATAN",
  "KALIMANTANUTARA", "SULAWESIUTARA", "SULAWESITENGAH", "NUSATENGGARABARAT",
  "PAPUABARAT", "PAPUATENGAH"
];

const gridSize = 20;
const grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(''));
const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

let timeLeft = 60;
const timerElement = document.getElementById('timer');
let gameOver = false;

function updateTimer() {
  const seconds = timeLeft;
  timerElement.textContent = `Waktu: 00:${String(seconds).padStart(2, '0')}`;

  if (timeLeft <= 0) {
    clearInterval(timerInterval);
    gameOver = true;
    Swal.fire({
      title: '‚è∞ Waktu Habis!',
      text: 'Tolol anak UPI, Coba lagi yuk!',
      icon: 'error',
      confirmButtonText: 'Ulangi'
    }).then(() => {
      location.reload();
    });
  } else {
    timeLeft--;
  }
}

const timerInterval = setInterval(updateTimer, 1000);

function placeWord(word) {
  const direction = Math.random() > 0.5 ? 'H' : 'V';
  const maxRow = direction === 'H' ? gridSize : gridSize - word.length;
  const maxCol = direction === 'H' ? gridSize - word.length : gridSize;

  let placed = false;
  while (!placed) {
    const row = Math.floor(Math.random() * maxRow);
    const col = Math.floor(Math.random() * maxCol);
    let fits = true;

    for (let i = 0; i < word.length; i++) {
      const r = direction === 'H' ? row : row + i;
      const c = direction === 'H' ? col + i : col;
      const current = grid[r][c];
      if (current !== '' && current !== word[i]) {
        fits = false;
        break;
      }
    }

    if (fits) {
      for (let i = 0; i < word.length; i++) {
        const r = direction === 'H' ? row : row + i;
        const c = direction === 'H' ? col + i : col;
        grid[r][c] = word[i];
      }
      placed = true;
    }
  }
}

words.forEach(placeWord);

for (let r = 0; r < gridSize; r++) {
  for (let c = 0; c < gridSize; c++) {
    if (grid[r][c] === '') {
      grid[r][c] = alphabet[Math.floor(Math.random() * alphabet.length)];
    }
  }
}

const gridTable = document.getElementById("grid");
const selectedCells = [];

grid.forEach((row, rowIndex) => {
  const tr = document.createElement("tr");
  row.forEach((char, colIndex) => {
    const td = document.createElement("td");
    td.textContent = char;
    td.dataset.row = rowIndex;
    td.dataset.col = colIndex;

    td.addEventListener("click", () => {
      if (gameOver || td.classList.contains("correct")) return;

      if (!td.classList.contains("selected")) {
        td.classList.add("selected");
        selectedCells.push(td);
      } else {
        td.classList.remove("selected");
        const index = selectedCells.indexOf(td);
        if (index > -1) selectedCells.splice(index, 1);
      }

      checkWord();
    });

    tr.appendChild(td);
  });
  gridTable.appendChild(tr);
});

function checkWord() {
  const word = selectedCells.map(td => td.textContent).join("");
  const reversed = selectedCells.map(td => td.textContent).reverse().join("");
  const upperWords = words.map(w => w.toUpperCase());

  if (upperWords.includes(word) || upperWords.includes(reversed)) {
    selectedCells.forEach(td => {
      td.classList.remove("selected");
      td.classList.add("correct");
    });
    selectedCells.length = 0;
    gameOver = true;

    Swal.fire({
      title: 'üéâ Selamat! Anjai tumben anak UPI Pinter',
      text: `Kamu menemukan: ${word}`,
      icon: 'success',
      confirmButtonText: 'Main Lagi'
    }).then(() => {
      location.reload();
    });
  }
}
</script>

</body>
</html>
